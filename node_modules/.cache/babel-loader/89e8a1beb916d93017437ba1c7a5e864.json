{"ast":null,"code":"// Process footnote references ([^...])\n'use strict';\n\nmodule.exports = function footnote_ref(state, silent) {\n  var label,\n      pos,\n      footnoteId,\n      footnoteSubId,\n      max = state.posMax,\n      start = state.pos; // should be at least 4 chars - \"[^x]\"\n\n  if (start + 3 > max) {\n    return false;\n  }\n\n  if (!state.env.footnotes || !state.env.footnotes.refs) {\n    return false;\n  }\n\n  if (state.src.charCodeAt(start) !== 0x5B\n  /* [ */\n  ) {\n    return false;\n  }\n\n  if (state.src.charCodeAt(start + 1) !== 0x5E\n  /* ^ */\n  ) {\n    return false;\n  }\n\n  if (state.level >= state.options.maxNesting) {\n    return false;\n  }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) {\n      return false;\n    }\n\n    if (state.src.charCodeAt(pos) === 0x0A) {\n      return false;\n    }\n\n    if (state.src.charCodeAt(pos) === 0x5D\n    /* ] */\n    ) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) {\n    return false;\n  } // no empty footnote labels\n\n\n  if (pos >= max) {\n    return false;\n  }\n\n  pos++;\n  label = state.src.slice(start + 2, pos - 1);\n\n  if (typeof state.env.footnotes.refs[':' + label] === 'undefined') {\n    return false;\n  }\n\n  if (!silent) {\n    if (!state.env.footnotes.list) {\n      state.env.footnotes.list = [];\n    }\n\n    if (state.env.footnotes.refs[':' + label] < 0) {\n      footnoteId = state.env.footnotes.list.length;\n      state.env.footnotes.list[footnoteId] = {\n        label: label,\n        count: 0\n      };\n      state.env.footnotes.refs[':' + label] = footnoteId;\n    } else {\n      footnoteId = state.env.footnotes.refs[':' + label];\n    }\n\n    footnoteSubId = state.env.footnotes.list[footnoteId].count;\n    state.env.footnotes.list[footnoteId].count++;\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      subId: footnoteSubId,\n      level: state.level\n    });\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n};","map":{"version":3,"names":["module","exports","footnote_ref","state","silent","label","pos","footnoteId","footnoteSubId","max","posMax","start","env","footnotes","refs","src","charCodeAt","level","options","maxNesting","slice","list","length","count","push","type","id","subId"],"sources":["C:/Users/caoma/Downloads/another/online-shop/node_modules/remarkable/lib/rules_inline/footnote_ref.js"],"sourcesContent":["// Process footnote references ([^...])\n\n'use strict';\n\n\nmodule.exports = function footnote_ref(state, silent) {\n  var label,\n      pos,\n      footnoteId,\n      footnoteSubId,\n      max = state.posMax,\n      start = state.pos;\n\n  // should be at least 4 chars - \"[^x]\"\n  if (start + 3 > max) { return false; }\n\n  if (!state.env.footnotes || !state.env.footnotes.refs) { return false; }\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x0A) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos >= max) { return false; }\n  pos++;\n\n  label = state.src.slice(start + 2, pos - 1);\n  if (typeof state.env.footnotes.refs[':' + label] === 'undefined') { return false; }\n\n  if (!silent) {\n    if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n\n    if (state.env.footnotes.refs[':' + label] < 0) {\n      footnoteId = state.env.footnotes.list.length;\n      state.env.footnotes.list[footnoteId] = { label: label, count: 0 };\n      state.env.footnotes.refs[':' + label] = footnoteId;\n    } else {\n      footnoteId = state.env.footnotes.refs[':' + label];\n    }\n\n    footnoteSubId = state.env.footnotes.list[footnoteId].count;\n    state.env.footnotes.list[footnoteId].count++;\n\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      subId: footnoteSubId,\n      level: state.level\n    });\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}