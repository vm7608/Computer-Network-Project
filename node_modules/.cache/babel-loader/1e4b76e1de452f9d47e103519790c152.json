{"ast":null,"code":"// Process footnote reference list\n'use strict';\n\nmodule.exports = function footnote(state, startLine, endLine, silent) {\n  var oldBMark,\n      oldTShift,\n      oldParentType,\n      pos,\n      label,\n      start = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine]; // line should be at least 5 chars - \"[^x]:\"\n\n  if (start + 4 > max) {\n    return false;\n  }\n\n  if (state.src.charCodeAt(start) !== 0x5B\n  /* [ */\n  ) {\n    return false;\n  }\n\n  if (state.src.charCodeAt(start + 1) !== 0x5E\n  /* ^ */\n  ) {\n    return false;\n  }\n\n  if (state.level >= state.options.maxNesting) {\n    return false;\n  }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) {\n      return false;\n    }\n\n    if (state.src.charCodeAt(pos) === 0x5D\n    /* ] */\n    ) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) {\n    return false;\n  } // no empty footnote labels\n\n\n  if (pos + 1 >= max || state.src.charCodeAt(++pos) !== 0x3A\n  /* : */\n  ) {\n    return false;\n  }\n\n  if (silent) {\n    return true;\n  }\n\n  pos++;\n\n  if (!state.env.footnotes) {\n    state.env.footnotes = {};\n  }\n\n  if (!state.env.footnotes.refs) {\n    state.env.footnotes.refs = {};\n  }\n\n  label = state.src.slice(start + 2, pos - 2);\n  state.env.footnotes.refs[':' + label] = -1;\n  state.tokens.push({\n    type: 'footnote_reference_open',\n    label: label,\n    level: state.level++\n  });\n  oldBMark = state.bMarks[startLine];\n  oldTShift = state.tShift[startLine];\n  oldParentType = state.parentType;\n  state.tShift[startLine] = state.skipSpaces(pos) - pos;\n  state.bMarks[startLine] = pos;\n  state.blkIndent += 4;\n  state.parentType = 'footnote';\n\n  if (state.tShift[startLine] < state.blkIndent) {\n    state.tShift[startLine] += state.blkIndent;\n    state.bMarks[startLine] -= state.blkIndent;\n  }\n\n  state.parser.tokenize(state, startLine, endLine, true);\n  state.parentType = oldParentType;\n  state.blkIndent -= 4;\n  state.tShift[startLine] = oldTShift;\n  state.bMarks[startLine] = oldBMark;\n  state.tokens.push({\n    type: 'footnote_reference_close',\n    level: --state.level\n  });\n  return true;\n};","map":{"version":3,"names":["module","exports","footnote","state","startLine","endLine","silent","oldBMark","oldTShift","oldParentType","pos","label","start","bMarks","tShift","max","eMarks","src","charCodeAt","level","options","maxNesting","env","footnotes","refs","slice","tokens","push","type","parentType","skipSpaces","blkIndent","parser","tokenize"],"sources":["C:/Users/caoma/Downloads/online-shop/node_modules/remarkable/lib/rules_block/footnote.js"],"sourcesContent":["// Process footnote reference list\n\n'use strict';\n\n\nmodule.exports = function footnote(state, startLine, endLine, silent) {\n  var oldBMark, oldTShift, oldParentType, pos, label,\n      start = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // line should be at least 5 chars - \"[^x]:\"\n  if (start + 4 > max) { return false; }\n\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos + 1 >= max || state.src.charCodeAt(++pos) !== 0x3A /* : */) { return false; }\n  if (silent) { return true; }\n  pos++;\n\n  if (!state.env.footnotes) { state.env.footnotes = {}; }\n  if (!state.env.footnotes.refs) { state.env.footnotes.refs = {}; }\n  label = state.src.slice(start + 2, pos - 2);\n  state.env.footnotes.refs[':' + label] = -1;\n\n  state.tokens.push({\n    type: 'footnote_reference_open',\n    label: label,\n    level: state.level++\n  });\n\n  oldBMark = state.bMarks[startLine];\n  oldTShift = state.tShift[startLine];\n  oldParentType = state.parentType;\n  state.tShift[startLine] = state.skipSpaces(pos) - pos;\n  state.bMarks[startLine] = pos;\n  state.blkIndent += 4;\n  state.parentType = 'footnote';\n\n  if (state.tShift[startLine] < state.blkIndent) {\n    state.tShift[startLine] += state.blkIndent;\n    state.bMarks[startLine] -= state.blkIndent;\n  }\n\n  state.parser.tokenize(state, startLine, endLine, true);\n\n  state.parentType = oldParentType;\n  state.blkIndent -= 4;\n  state.tShift[startLine] = oldTShift;\n  state.bMarks[startLine] = oldBMark;\n\n  state.tokens.push({\n    type: 'footnote_reference_close',\n    level: --state.level\n  });\n\n  return true;\n};\n"],"mappings":"AAAA;AAEA;;AAGAA,MAAM,CAACC,OAAP,GAAiB,SAASC,QAAT,CAAkBC,KAAlB,EAAyBC,SAAzB,EAAoCC,OAApC,EAA6CC,MAA7C,EAAqD;EACpE,IAAIC,QAAJ;EAAA,IAAcC,SAAd;EAAA,IAAyBC,aAAzB;EAAA,IAAwCC,GAAxC;EAAA,IAA6CC,KAA7C;EAAA,IACIC,KAAK,GAAGT,KAAK,CAACU,MAAN,CAAaT,SAAb,IAA0BD,KAAK,CAACW,MAAN,CAAaV,SAAb,CADtC;EAAA,IAEIW,GAAG,GAAGZ,KAAK,CAACa,MAAN,CAAaZ,SAAb,CAFV,CADoE,CAKpE;;EACA,IAAIQ,KAAK,GAAG,CAAR,GAAYG,GAAhB,EAAqB;IAAE,OAAO,KAAP;EAAe;;EAEtC,IAAIZ,KAAK,CAACc,GAAN,CAAUC,UAAV,CAAqBN,KAArB,MAAgC;EAAI;EAAxC,EAAiD;IAAE,OAAO,KAAP;EAAe;;EAClE,IAAIT,KAAK,CAACc,GAAN,CAAUC,UAAV,CAAqBN,KAAK,GAAG,CAA7B,MAAoC;EAAI;EAA5C,EAAqD;IAAE,OAAO,KAAP;EAAe;;EACtE,IAAIT,KAAK,CAACgB,KAAN,IAAehB,KAAK,CAACiB,OAAN,CAAcC,UAAjC,EAA6C;IAAE,OAAO,KAAP;EAAe;;EAE9D,KAAKX,GAAG,GAAGE,KAAK,GAAG,CAAnB,EAAsBF,GAAG,GAAGK,GAA5B,EAAiCL,GAAG,EAApC,EAAwC;IACtC,IAAIP,KAAK,CAACc,GAAN,CAAUC,UAAV,CAAqBR,GAArB,MAA8B,IAAlC,EAAwC;MAAE,OAAO,KAAP;IAAe;;IACzD,IAAIP,KAAK,CAACc,GAAN,CAAUC,UAAV,CAAqBR,GAArB,MAA8B;IAAK;IAAvC,EAAgD;MAC9C;IACD;EACF;;EAED,IAAIA,GAAG,KAAKE,KAAK,GAAG,CAApB,EAAuB;IAAE,OAAO,KAAP;EAAe,CAnB4B,CAmB3B;;;EACzC,IAAIF,GAAG,GAAG,CAAN,IAAWK,GAAX,IAAkBZ,KAAK,CAACc,GAAN,CAAUC,UAAV,CAAqB,EAAER,GAAvB,MAAgC;EAAK;EAA3D,EAAoE;IAAE,OAAO,KAAP;EAAe;;EACrF,IAAIJ,MAAJ,EAAY;IAAE,OAAO,IAAP;EAAc;;EAC5BI,GAAG;;EAEH,IAAI,CAACP,KAAK,CAACmB,GAAN,CAAUC,SAAf,EAA0B;IAAEpB,KAAK,CAACmB,GAAN,CAAUC,SAAV,GAAsB,EAAtB;EAA2B;;EACvD,IAAI,CAACpB,KAAK,CAACmB,GAAN,CAAUC,SAAV,CAAoBC,IAAzB,EAA+B;IAAErB,KAAK,CAACmB,GAAN,CAAUC,SAAV,CAAoBC,IAApB,GAA2B,EAA3B;EAAgC;;EACjEb,KAAK,GAAGR,KAAK,CAACc,GAAN,CAAUQ,KAAV,CAAgBb,KAAK,GAAG,CAAxB,EAA2BF,GAAG,GAAG,CAAjC,CAAR;EACAP,KAAK,CAACmB,GAAN,CAAUC,SAAV,CAAoBC,IAApB,CAAyB,MAAMb,KAA/B,IAAwC,CAAC,CAAzC;EAEAR,KAAK,CAACuB,MAAN,CAAaC,IAAb,CAAkB;IAChBC,IAAI,EAAE,yBADU;IAEhBjB,KAAK,EAAEA,KAFS;IAGhBQ,KAAK,EAAEhB,KAAK,CAACgB,KAAN;EAHS,CAAlB;EAMAZ,QAAQ,GAAGJ,KAAK,CAACU,MAAN,CAAaT,SAAb,CAAX;EACAI,SAAS,GAAGL,KAAK,CAACW,MAAN,CAAaV,SAAb,CAAZ;EACAK,aAAa,GAAGN,KAAK,CAAC0B,UAAtB;EACA1B,KAAK,CAACW,MAAN,CAAaV,SAAb,IAA0BD,KAAK,CAAC2B,UAAN,CAAiBpB,GAAjB,IAAwBA,GAAlD;EACAP,KAAK,CAACU,MAAN,CAAaT,SAAb,IAA0BM,GAA1B;EACAP,KAAK,CAAC4B,SAAN,IAAmB,CAAnB;EACA5B,KAAK,CAAC0B,UAAN,GAAmB,UAAnB;;EAEA,IAAI1B,KAAK,CAACW,MAAN,CAAaV,SAAb,IAA0BD,KAAK,CAAC4B,SAApC,EAA+C;IAC7C5B,KAAK,CAACW,MAAN,CAAaV,SAAb,KAA2BD,KAAK,CAAC4B,SAAjC;IACA5B,KAAK,CAACU,MAAN,CAAaT,SAAb,KAA2BD,KAAK,CAAC4B,SAAjC;EACD;;EAED5B,KAAK,CAAC6B,MAAN,CAAaC,QAAb,CAAsB9B,KAAtB,EAA6BC,SAA7B,EAAwCC,OAAxC,EAAiD,IAAjD;EAEAF,KAAK,CAAC0B,UAAN,GAAmBpB,aAAnB;EACAN,KAAK,CAAC4B,SAAN,IAAmB,CAAnB;EACA5B,KAAK,CAACW,MAAN,CAAaV,SAAb,IAA0BI,SAA1B;EACAL,KAAK,CAACU,MAAN,CAAaT,SAAb,IAA0BG,QAA1B;EAEAJ,KAAK,CAACuB,MAAN,CAAaC,IAAb,CAAkB;IAChBC,IAAI,EAAE,0BADU;IAEhBT,KAAK,EAAE,EAAEhB,KAAK,CAACgB;EAFC,CAAlB;EAKA,OAAO,IAAP;AACD,CA7DD"},"metadata":{},"sourceType":"script"}