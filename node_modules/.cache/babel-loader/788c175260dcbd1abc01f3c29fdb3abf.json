{"ast":null,"code":"import warning from 'warning';\n\nvar createTransitionManager = function createTransitionManager() {\n  var prompt = null;\n\n  var setPrompt = function setPrompt(nextPrompt) {\n    warning(prompt == null, 'A history supports only one prompt at a time');\n    prompt = nextPrompt;\n    return function () {\n      if (prompt === nextPrompt) prompt = null;\n    };\n  };\n\n  var confirmTransitionTo = function confirmTransitionTo(location, action, getUserConfirmation, callback) {\n    // TODO: If another transition starts while we're still confirming\n    // the previous one, we may end up in a weird state. Figure out the\n    // best way to handle this.\n    if (prompt != null) {\n      var result = typeof prompt === 'function' ? prompt(location, action) : prompt;\n\n      if (typeof result === 'string') {\n        if (typeof getUserConfirmation === 'function') {\n          getUserConfirmation(result, callback);\n        } else {\n          warning(false, 'A history needs a getUserConfirmation function in order to use a prompt message');\n          callback(true);\n        }\n      } else {\n        // Return false from a transition hook to cancel the transition.\n        callback(result !== false);\n      }\n    } else {\n      callback(true);\n    }\n  };\n\n  var listeners = [];\n\n  var appendListener = function appendListener(fn) {\n    var isActive = true;\n\n    var listener = function listener() {\n      if (isActive) fn.apply(undefined, arguments);\n    };\n\n    listeners.push(listener);\n    return function () {\n      isActive = false;\n      listeners = listeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  };\n\n  var notifyListeners = function notifyListeners() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    listeners.forEach(function (listener) {\n      return listener.apply(undefined, args);\n    });\n  };\n\n  return {\n    setPrompt: setPrompt,\n    confirmTransitionTo: confirmTransitionTo,\n    appendListener: appendListener,\n    notifyListeners: notifyListeners\n  };\n};\n\nexport default createTransitionManager;","map":{"version":3,"names":["warning","createTransitionManager","prompt","setPrompt","nextPrompt","confirmTransitionTo","location","action","getUserConfirmation","callback","result","listeners","appendListener","fn","isActive","listener","apply","undefined","arguments","push","filter","item","notifyListeners","_len","length","args","Array","_key","forEach"],"sources":["C:/Users/caoma/Downloads/online-shop/node_modules/history/es/createTransitionManager.js"],"sourcesContent":["import warning from 'warning';\n\nvar createTransitionManager = function createTransitionManager() {\n  var prompt = null;\n\n  var setPrompt = function setPrompt(nextPrompt) {\n    warning(prompt == null, 'A history supports only one prompt at a time');\n\n    prompt = nextPrompt;\n\n    return function () {\n      if (prompt === nextPrompt) prompt = null;\n    };\n  };\n\n  var confirmTransitionTo = function confirmTransitionTo(location, action, getUserConfirmation, callback) {\n    // TODO: If another transition starts while we're still confirming\n    // the previous one, we may end up in a weird state. Figure out the\n    // best way to handle this.\n    if (prompt != null) {\n      var result = typeof prompt === 'function' ? prompt(location, action) : prompt;\n\n      if (typeof result === 'string') {\n        if (typeof getUserConfirmation === 'function') {\n          getUserConfirmation(result, callback);\n        } else {\n          warning(false, 'A history needs a getUserConfirmation function in order to use a prompt message');\n\n          callback(true);\n        }\n      } else {\n        // Return false from a transition hook to cancel the transition.\n        callback(result !== false);\n      }\n    } else {\n      callback(true);\n    }\n  };\n\n  var listeners = [];\n\n  var appendListener = function appendListener(fn) {\n    var isActive = true;\n\n    var listener = function listener() {\n      if (isActive) fn.apply(undefined, arguments);\n    };\n\n    listeners.push(listener);\n\n    return function () {\n      isActive = false;\n      listeners = listeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  };\n\n  var notifyListeners = function notifyListeners() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    listeners.forEach(function (listener) {\n      return listener.apply(undefined, args);\n    });\n  };\n\n  return {\n    setPrompt: setPrompt,\n    confirmTransitionTo: confirmTransitionTo,\n    appendListener: appendListener,\n    notifyListeners: notifyListeners\n  };\n};\n\nexport default createTransitionManager;"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;;AAEA,IAAIC,uBAAuB,GAAG,SAASA,uBAAT,GAAmC;EAC/D,IAAIC,MAAM,GAAG,IAAb;;EAEA,IAAIC,SAAS,GAAG,SAASA,SAAT,CAAmBC,UAAnB,EAA+B;IAC7CJ,OAAO,CAACE,MAAM,IAAI,IAAX,EAAiB,8CAAjB,CAAP;IAEAA,MAAM,GAAGE,UAAT;IAEA,OAAO,YAAY;MACjB,IAAIF,MAAM,KAAKE,UAAf,EAA2BF,MAAM,GAAG,IAAT;IAC5B,CAFD;EAGD,CARD;;EAUA,IAAIG,mBAAmB,GAAG,SAASA,mBAAT,CAA6BC,QAA7B,EAAuCC,MAAvC,EAA+CC,mBAA/C,EAAoEC,QAApE,EAA8E;IACtG;IACA;IACA;IACA,IAAIP,MAAM,IAAI,IAAd,EAAoB;MAClB,IAAIQ,MAAM,GAAG,OAAOR,MAAP,KAAkB,UAAlB,GAA+BA,MAAM,CAACI,QAAD,EAAWC,MAAX,CAArC,GAA0DL,MAAvE;;MAEA,IAAI,OAAOQ,MAAP,KAAkB,QAAtB,EAAgC;QAC9B,IAAI,OAAOF,mBAAP,KAA+B,UAAnC,EAA+C;UAC7CA,mBAAmB,CAACE,MAAD,EAASD,QAAT,CAAnB;QACD,CAFD,MAEO;UACLT,OAAO,CAAC,KAAD,EAAQ,iFAAR,CAAP;UAEAS,QAAQ,CAAC,IAAD,CAAR;QACD;MACF,CARD,MAQO;QACL;QACAA,QAAQ,CAACC,MAAM,KAAK,KAAZ,CAAR;MACD;IACF,CAfD,MAeO;MACLD,QAAQ,CAAC,IAAD,CAAR;IACD;EACF,CAtBD;;EAwBA,IAAIE,SAAS,GAAG,EAAhB;;EAEA,IAAIC,cAAc,GAAG,SAASA,cAAT,CAAwBC,EAAxB,EAA4B;IAC/C,IAAIC,QAAQ,GAAG,IAAf;;IAEA,IAAIC,QAAQ,GAAG,SAASA,QAAT,GAAoB;MACjC,IAAID,QAAJ,EAAcD,EAAE,CAACG,KAAH,CAASC,SAAT,EAAoBC,SAApB;IACf,CAFD;;IAIAP,SAAS,CAACQ,IAAV,CAAeJ,QAAf;IAEA,OAAO,YAAY;MACjBD,QAAQ,GAAG,KAAX;MACAH,SAAS,GAAGA,SAAS,CAACS,MAAV,CAAiB,UAAUC,IAAV,EAAgB;QAC3C,OAAOA,IAAI,KAAKN,QAAhB;MACD,CAFW,CAAZ;IAGD,CALD;EAMD,CAfD;;EAiBA,IAAIO,eAAe,GAAG,SAASA,eAAT,GAA2B;IAC/C,KAAK,IAAIC,IAAI,GAAGL,SAAS,CAACM,MAArB,EAA6BC,IAAI,GAAGC,KAAK,CAACH,IAAD,CAAzC,EAAiDI,IAAI,GAAG,CAA7D,EAAgEA,IAAI,GAAGJ,IAAvE,EAA6EI,IAAI,EAAjF,EAAqF;MACnFF,IAAI,CAACE,IAAD,CAAJ,GAAaT,SAAS,CAACS,IAAD,CAAtB;IACD;;IAEDhB,SAAS,CAACiB,OAAV,CAAkB,UAAUb,QAAV,EAAoB;MACpC,OAAOA,QAAQ,CAACC,KAAT,CAAeC,SAAf,EAA0BQ,IAA1B,CAAP;IACD,CAFD;EAGD,CARD;;EAUA,OAAO;IACLtB,SAAS,EAAEA,SADN;IAELE,mBAAmB,EAAEA,mBAFhB;IAGLO,cAAc,EAAEA,cAHX;IAILU,eAAe,EAAEA;EAJZ,CAAP;AAMD,CAxED;;AA0EA,eAAerB,uBAAf"},"metadata":{},"sourceType":"module"}